#include "GBA.h"

#ifdef BKPT_SUPPORT
int oldreg[18];
char oldbuffer[10];
#endif

reg_pair reg[45];
memoryMap map[256];
bool ioReadable[0x400];
bool N_FLAG = 0;
bool C_FLAG = 0;
bool Z_FLAG = 0;
bool V_FLAG = 0;
bool armState = true;
bool armIrqEnable = true;
uint32_t armNextPC = 0x00000000;
int armMode = 0x1f;
uint32_t stop = 0x08000568;

uint8_t* bios = 0;
uint8_t* rom = 0;
uint8_t* internalRAM = 0;
uint8_t* workRAM = 0;
uint8_t* paletteRAM = 0;
uint8_t* vram = 0;
uint8_t* oam = 0;
uint8_t* ioMem = 0;
pixFormat* pix = 0;

//uint16_t lcd.dispcnt = 0x0080;
//uint16_t lcd.dispstat = 0x0000;
//uint16_t lcd.vcount = 0x0000;
uint16_t BG0CNT = 0x0000;
uint16_t BG1CNT = 0x0000;
uint16_t BG2CNT = 0x0000;
uint16_t BG3CNT = 0x0000;
/*uint16_t lcd.bg[0].hofs = 0x0000;
uint16_t lcd.bg[0].vofs = 0x0000;
uint16_t lcd.bg[1].hofs = 0x0000;
uint16_t lcd.bg[1].vofs = 0x0000;
uint16_t lcd.bg[2].hofs = 0x0000;
uint16_t lcd.bg[2].vofs = 0x0000;
uint16_t lcd.bg[3].hofs = 0x0000;
uint16_t lcd.bg[3].vofs = 0x0000;*/
uint16_t BG2PA = 0x0100;
uint16_t BG2PB = 0x0000;
uint16_t BG2PC = 0x0000;
uint16_t BG2PD = 0x0100;
uint16_t BG2X_L = 0x0000;
uint16_t BG2X_H = 0x0000;
uint16_t BG2Y_L = 0x0000;
uint16_t BG2Y_H = 0x0000;
uint16_t BG3PA = 0x0100;
uint16_t BG3PB = 0x0000;
uint16_t BG3PC = 0x0000;
uint16_t BG3PD = 0x0100;
uint16_t BG3X_L = 0x0000;
uint16_t BG3X_H = 0x0000;
uint16_t BG3Y_L = 0x0000;
uint16_t BG3Y_H = 0x0000;
/*uint16_t lcd.winh[0] = 0x0000;
uint16_t lcd.winh[1] = 0x0000;
uint16_t lcd.winv[0] = 0x0000;
uint16_t lcd.winv[1] = 0x0000;
uint16_t lcd.winin = 0x0000;
uint16_t lcd.winout = 0x0000;
uint16_t lcd.mosaic = 0x0000;
uint16_t lcd.bldcnt = 0x0000;
uint16_t lcd.bldalpha = 0x0000;
uint16_t lcd.bldy = 0x0000;*/
uint16_t DM0SAD_L = 0x0000;
uint16_t DM0SAD_H = 0x0000;
uint16_t DM0DAD_L = 0x0000;
uint16_t DM0DAD_H = 0x0000;
uint16_t DM0CNT_L = 0x0000;
uint16_t DM0CNT_H = 0x0000;
uint16_t DM1SAD_L = 0x0000;
uint16_t DM1SAD_H = 0x0000;
uint16_t DM1DAD_L = 0x0000;
uint16_t DM1DAD_H = 0x0000;
uint16_t DM1CNT_L = 0x0000;
uint16_t DM1CNT_H = 0x0000;
uint16_t DM2SAD_L = 0x0000;
uint16_t DM2SAD_H = 0x0000;
uint16_t DM2DAD_L = 0x0000;
uint16_t DM2DAD_H = 0x0000;
uint16_t DM2CNT_L = 0x0000;
uint16_t DM2CNT_H = 0x0000;
uint16_t DM3SAD_L = 0x0000;
uint16_t DM3SAD_H = 0x0000;
uint16_t DM3DAD_L = 0x0000;
uint16_t DM3DAD_H = 0x0000;
uint16_t DM3CNT_L = 0x0000;
uint16_t DM3CNT_H = 0x0000;
uint16_t TM0D = 0x0000;
uint16_t TM0CNT = 0x0000;
uint16_t TM1D = 0x0000;
uint16_t TM1CNT = 0x0000;
uint16_t TM2D = 0x0000;
uint16_t TM2CNT = 0x0000;
uint16_t TM3D = 0x0000;
uint16_t TM3CNT = 0x0000;
uint16_t P1 = 0xFFFF;
uint16_t IE = 0x0000;
uint16_t IF = 0x0000;
uint16_t IME = 0x0000;
